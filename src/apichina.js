var rootUrl = 'http://www.weather.com.cn/adat/sk/';
//http://api.wunderground.com/api/a5dfe909b64e6900/conditions/q/CA/San_Francisco.json

//api.openweathermap.org/data/2.5/weather?q={city name}
//http://www.weather.com.cn/adat/sk/101110101.html

var kelvinToF = function(kelvin) {
	return Math.round((kelvin-273.15)*1.8+32)+' ˚F'

};

var kelvinToC = function(kelvin) {
	return Math.round(kelvin-273.15) + ' ˚C'
};

var WeatherCode = {'Zunyi': '101260201', 'Zhengzhou': '101180101', 'Ziyang': '101271301', 'Yuxi': '101290701', 'Tongchuan': '101111001', 'Heze': '101121001', 'Zhenjiang': '101190301', 'Dandong': '101070601', 'Jinzhong': '101100401', 'Linyi': '101120901', 'Changji': '101130401', 'Bayannur': '101080801', 'Zhangzhou': '101230601', 'Hebi': '101181201', 'Huanggang': '101200501', 'Changchun': '101060101', 'Baicheng': '101060601', 'Mianyang': '101270401', 'Wuzhong': '101170301', 'Shenzhen': '101280601', 'Zhumadian': '101181601', 'Baiyin': '101161301', 'Shiyan': '101201101', 'Huzhou': '101210201', 'Linxia': '101161101', 'Nanping': '101230901', 'Yancheng': '101190701', "Xi'an": '101110101', 'Ezhou': '101200301', 'Tianshui': '101160901', 'Baotou': '101080201', 'Handan': '101091001', 'Jiaxing': '101210301', 'Lishui': '101210801', 'Xiangyang': '101200201', 'Changzhi': '101100501', "Ya'an": '101271701', 'Zhaotong': '101291001', 'Shigatse': '101140201', 'Yueyang': '101251001', 'Baishan': '101060901', 'Chaohu': '101221601', 'Hanzhong': '101110801', 'Suqian': '101191301', 'Kashgar': '101130901', 'Zhuhai': '101280701', 'Zhuzhou': '101250301', 'Jingmen': '101201401', 'Liuzhou': '101300301', 'Nanning': '101300101', 'Wuhai': '101080301', 'Aksu': '101130801', 'Tangshan': '101090501', 'Ningde': '101230301', 'Jinchang': '101160601', 'Guyuan': '101170401', 'Yunfu': '101281401', 'Kunming': '101290101', 'Wuwei': '101160501', 'Hotan': '101131301', 'Harbin': '101050101', 'Anshan': '101070301', "Huai'an": '101190901', 'Xinxiang': '101180301', 'Chongzuo': '101300201', 'Huizhou': '101280301', 'Yulin': '101110401', 'Shenyang': '101070101', 'Qingyang': '101160401', 'Lianyungang': '101191001', 'Ulanqab': '101080401', 'Yuncheng': '101100801', 'Zhangjiakou': '101090301', 'Bijie': '101260701', 'Yingkou': '101070801', 'Langfang': '101090601', 'Kumul': '101131201', 'Yibin': '101271101', 'Zhongshan': '101281701', 'Liaoyang': '101071001', 'Hengyang': '101250401', 'Xinzhou': '101101001', 'Datong': '101100201', 'Chamdo': '101140501', 'Liaocheng': '101121701', 'Changde': '101250601', 'Jingdezhen': '101240801', 'Tianmen': '101201501', 'L\xc3\xbcliang': '101101101', 'Shaoyang': '101250901', 'Zhangjiajie': '101251101', 'Dingxi': '101160201', 'Puyang': '101181301', 'Zibo': '101120301', 'Xingtai': '101090901', 'Huaibei': '101221201', 'Tacheng': '101131101', 'Siping': '101060401', 'Baoding': '101090201', 'Lijiang': '101291401', 'Yichun': '101240501', 'Tieling': '101071101', 'Xinyu': '101241001', 'Guangzhou': '101280101', 'Jieyang': '101281901', 'Panjin': '101071301', 'Hefei': '101220101', 'Huludao': '101071401', 'Luoyang': '101180901', 'Jiayuguan': '101161401', 'Dezhou': '101120401', 'Zhoushan': '101211101', 'Jinzhou': '101070701', 'Chuzhou': '101221101', 'Baoji': '101110901', 'Jiuquan': '101160801', 'Xiamen': '101230201', 'Chenzhou': '101250501', 'Shuozhou': '101100901', "Tai'an": '101120801', 'Shijiazhuang': '101090101', 'Pingdingshan': '101180501', 'Luzhou': '101271001', 'Weinan': '101110501', '\xc3\x9cr\xc3\xbcmqi': '101130101', 'Changzhou': '101191101', 'Wuxi': '101190201', 'Taiyuan': '101100101', 'Foshan': '101280801', 'Rizhao': '101121501', 'Qujing': '101290401', 'Ankang': '101110701', 'Aral': '101130701', 'Laibin': '101300401', 'Xiantao': '101201601', 'Xuchang': '101180401', 'Hangzhou': '101210101', 'Pingxiang': '101240901', 'Yongzhou': '101251301', 'Turpan': '101130501', 'Ningbo': '101210401', 'Fuzhou': '101240401', 'Hohhot': '101080101', 'Zaozhuang': '101121401', 'Chaozhou': '101281501', 'Sanming': '101230801', 'Nanchang': '101240101', 'Tonghua': '101060501', "Lu'an": '101221501', 'Chaoyang': '101071201', 'Zhangye': '101160701', 'Shuangyashan': '101051301', 'Fuxin': '101070901', 'Mudanjiang': '101050301', 'Jining': '101120701', 'Suizhou': '101201301', 'Xuancheng': '101221401', 'Kaifeng': '101180801', 'Tongling': '101221301', 'Quanzhou': '101230501', 'Pingliang': '101160301', 'Panzhihua': '101270201', 'Quzhou': '101211001', 'Bazhong': '101270901', 'Jiujiang': '101240201', 'Dongguan': '101281601', 'Lanzhou': '101160101', 'Altay': '101131401', 'Shantou': '101280501', 'Dazhou': '101270601', 'Shanwei': '101282101', 'Maoming': '101282001', 'Yantai': '101120501', 'Heyuan': '101281201', 'Yingtan': '101241101', 'Dali': '101290201', 'Xining': '101150101', 'Suihua': '101050501', 'Suining': '101270701', 'Longyan': '101230701', 'Shangrao': '101240301', 'Xuzhou': '101190801', 'Xiaogan': '101200401', 'Taizhou': '101210601', 'Bozhou': '101220901', 'Jiamusi': '101050401', 'Golmud': '101150901', 'Laiwu': '101121601', 'Nanyang': '101180701', "Yan'an": '101110301', 'Hegang': '101051201', 'Wenzhou': '101210701', 'Anqing': '101220601', 'Daqing': '101050901', 'Hulunbuir': '101081001', 'Qitaihe': '101051001', 'Nanchong': '101270501', 'Guiyang': '101260101', 'Putian': '101230401', 'Luohe': '101181501', 'Yichang': '101200901', 'Hengshui': '101090801', 'Enshi': '101201001', 'Chizhou': '101221701', "Ji'an": '101240601', 'Chengdu': '101270101', 'Beijing': '101010101', 'Xianning': '101200701', 'Deyang': '101272001', 'Loudi': '101250801', 'Shangluo': '101110601', 'Xiangtan': '101250201', 'Dongying': '101121201', 'Benxi': '101070501', 'Songyuan': '101060801', 'Sanmenxia': '101181701', 'Nyingchi': '101140401', 'Shaoguan': '101280201', 'Qingyuan': '101281301', 'Shihezi': '101130301', 'Zigong': '101270301', 'Zhongwei': '101170501', 'Ordos': '101080701', 'Jilin': '101060201', 'Leshan': '101271401', 'Neijiang': '101271201', 'Liupanshui': '101260801', 'Tongliao': '101080501', 'Tianjin': '101030101', 'Shanghai': '101020101', 'Fuyang': '101220801', 'Jinhua': '101210901', 'Lhasa': '101140101', 'Liaoyuan': '101060701', 'Cangzhou': '101090701', 'Karamay': '101130201', 'Wuhu': '101220301', 'Shizuishan': '101170201', 'Chuxiong': '101290801', "Pu'er": '101290901', 'Qiqihar': '101050201', 'Huangshi': '101200601', 'Qinhuangdao': '101091101', 'Yangquan': '101100301', 'Qianjiang': '101201701', 'Shangqiu': '101181001', 'Huainan': '101220401', "Ma'anshan": '101220501', 'Jiyuan': '101181801', 'Yiyang': '101250701', 'Wuhan': '101200101', 'Zhanjiang': '101281001', 'Yangjiang': '101281801', 'Xianyang': '101110201', 'Fushun': '101070401', 'Longnan': '101161001', 'Chifeng': '101080601', 'Qingdao': '101120201', 'Chongqing': '101040101', 'Meizhou': '101280401', 'Yinchuan': '101170101', 'Heihe': '101050601', 'Jincheng': '101100601', 'Weihai': '101121301', 'Jiaozuo': '101181101', 'Yangzhou': '101190601', 'Huangshan': '101221001', 'Changsha': '101250101', 'Anshun': '101260301', 'Shaoxing': '101210501', 'Suzhou': '101220701', 'Baoshan': '101290501', 'Anyang': '101180201', "Guang'an": '101270801', 'Linfen': '101100701', 'Jingzhou': '101200801', 'Guangyuan': '101272101', 'Tongren': '101260601', 'Dalian': '101070201', 'Weifang': '101120601', 'Nantong': '101190501', 'Binzhou': '101121101', 'Lincang': '101291101', 'Yushu': '101150601', 'Zhoukou': '101181401', 'Jinan': '101120101', 'Meishan': '101271501', 'Nanjing': '101190101', 'Bengbu': '101220201', 'Guilin': '101300501', 'Ganzhou': '101240701', 'Chengde': '101090401', 'Jixi': '101051101', 'Haidong': '101150201', 'Huaihua': '101251201', 'Xinyang': '101180601', 'Jiangmen': '101281101', 'Zhaoqing': '101280901'}
//template string
//http://www.weather.com.cn/adat/sk/101110101.html

module.exports = function(city) {
  //var url = `${rootUrl}lat=${latitude}&lon=${longitude}&APPID=3db9d162a42fd1a53941c17d5c159d46`;
  var citycode = WeatherCode.city
  var url = `${rootUrl}${citycode}.html`;
  return fetch(url)
    .then(function(response){
  	  return response.json();
  	})
  	.then(function(json){
  		return {
  		  //tempF: kelvinToF(json.main.temp),
  		  //tempC: kelvinToC(json.main.temp),
  		  //description: _.capitalize(json.weather[0].description)
        tempF: json.current_observation.temp_f,
        tempC: json.current_observation.temp_c,
        description: json.current_observation.icon,
  		}
  	});
}
//http://api.openweathermap.org/data/2.5/weather?lat=35&lon=139&appid=2de143494c0b295cca9337e1e96b00e0
//api.openweathermap.org/date/2.5/weather?&lat=37.13283999999998&lon=-95.78557999999998&appid=93e87bf97d422de142f8fa8d0771e5a6
//http://api.openweathermap.org/date/2.5/weather?lat=37.13283999999998&lon=-95.78557999999998&appid=93e87bf97d422de142f8fa8d0771e5a6
//http://api.openweathermap.org/date/2.5/weather?lat=35&lon=139&appid=2de143494c0b295cca9337e1e96b00e0